<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="个人日记 nodejs学习。"><meta name="baidu-site-verification" content="7tp9tihrLG"><title>play framework框架 | 秋过冬漫长天亮中</title><link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=1.0.0"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">play framework框架</h1><a id="logo" href="/.">秋过冬漫长天亮中</a><p class="description">没有比脚更长的路，走过去，前面是个天！</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div id="toc" class="toc-article"><div class="toc-title">目录</div><toc item.content {list_number: false}></toc></div><div class="post"><h1 class="post-title">play framework框架</h1><div class="post-meta">Nov 17, 2016<span> | </span><span class="category"><a href="/categories/play-framework/">play framework</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-thread-key="2016/11/17/框架概述/" href="/2016/11/17/框架概述/#comments" class="ds-thread-count"></a><div class="post-content"><p>[TOC]</p>
<h2 id="第一章-绪论"><a href="#第一章-绪论" class="headerlink" title="第一章 绪论"></a>第一章 绪论</h2><h4 id="1-1框架概述"><a href="#1-1框架概述" class="headerlink" title="1.1框架概述"></a>1.1框架概述</h4><p>Play框架颠覆了臃肿的企业级Java EE规范，以Restful为目标并专注于开发效率，是Java敏捷开发的最佳参考方案。开发者只要具备Java以及数据库的相关基础知识就可以轻松上手，从而让Web应用开发变得更加容易，提高项目催化速度。</p>
<p>作为Full Stack的Java Web应用框架，Play包括了所有开发中涉及的领域：NIO应用容器，无状态MVC模型，Hibernate数据持久化，Groovy模板引擎，以及建立Web应用所需要的各种工具类。需要注意的是，这里虽然使用了Groovy，但只是将其作为页面模板语言，和Freemaker、Velocity使用自己定义的语言是同样的道理。Groovy的成熟以及它和Java的相似性决定了采用Groovy远远好于定义自己的模板语言。</p>
<p><img src="http://7xpgda.com1.z0.glb.clouddn.com/play.png" alt="Alt text" title="框架概述/play.png"></p>
<p>Play的发展历程：</p>
<p>2009年10月19日发布Play 1.0稳定版，引入Groovy作为模板引擎，Python提供跨平台的Shell支持，并提供异步I/O功能。后续针对1.0进行BUG修复，以及新特性的增加：HTM5支持，提供Eclipse插件，模块仓库，App云服务等。<br>2010年9月1日发布Play1.1稳定版本，将HTTP服务器从原来的Apache Mina替换为Jboss Netty，框架开始支持Scala语言，新的缓存特性，Oauth支持等。<br>2011年4月13日发布Play 1.2稳定版本，将内存数据库从原来的HSQLDB转向H2，提供依赖管理，更好的异步特性等。<br>当前最稳定版本为Play 1.2.7，于2013年8月29日发布，可以使用Java7来编写应用。<br>当前最新版本为Play 1.3.0 RC版，于2014年6月26日发布，相信不久后就会有正式版本发布。<br>由于设计的考量，Play已经不采用Servlet/JSP，因而早期Play 0.x版本在发展历程中不做详细介绍。</p>
<h2 id="1-2框架特性"><a href="#1-2框架特性" class="headerlink" title="1.2框架特性"></a>1.2框架特性</h2><h4 id="1-2-1-无缝集成现有开发环境"><a href="#1-2-1-无缝集成现有开发环境" class="headerlink" title="1.2.1 无缝集成现有开发环境"></a>1.2.1 无缝集成现有开发环境</h4><pre><code>Play1.x是基于Java的Web开发框架，允许开发者使用自己常用的集成开发工具（如Eclipse）和类库。如果读者已经以Java作为开发方向，那么无须进行开发语言、IDE或者类库的切换，要做的就是在更加高效的Java环境中开发Web应用。
</code></pre><h4 id="1-2-2-热重载和修改Bug"><a href="#1-2-2-热重载和修改Bug" class="headerlink" title="1.2.2 热重载和修改Bug"></a>1.2.2 热重载和修改Bug</h4><pre><code>Java在过去因为开发效率低下而臭名昭著，主要是因为其重复和乏味的编译-打包-部署周期。因此在设计框架的时候对这些因素都进行了重新考量，目标是让Play应用的开发过程变得更加高效。

Play框架会自动编译Java源文件，而不用重新启动Web服务器将代码热加载至JVM。这样做的好处是：当代码修改完保存后，框架自动编译并重载修改后的类，只需刷新浏览器就可以查看更改的结果，就像在LAMP或者Rails环境中开发一样。另外一个好处是：开发的时候甚至可以只用简单的文本编辑器，而不使用功能完备的Java IDE进行开发，如图1.1所示：
</code></pre><p><img src="http://7xpgda.com1.z0.glb.clouddn.com/1.2.2.png" alt="Alt text" title="图片资源/editor.png"></p>
<p>(图1.1 简单的文本编辑器)</p>
<pre><code>使用Play开发应用的过程中，在任何时候出现的语法错误或者异常，框架都能够准确将其定位并显示对应的提示信息。好处显而易见：应用的Bug能够很直观地显示出来，帮助开发者迅速锁定出错位置。如图1.2所示：
</code></pre><p><img src="http://7xpgda.com1.z0.glb.clouddn.com/1.2.2.2png" alt="Alt text" title="图片资源/guide1-3.png"></p>
<p>(图1.2 框架准确定位错误代码位置)</p>
<pre><code>Play框架替换了原有以栈跟踪的方式来提示错误，取而代之的是在浏览器中以更加友好并且直观的页面形式来显示错误出现的确切位置(当然在控制台中仍以栈跟踪的方式显示错误信息)。此外，Play还把模板执行发生的异常信息完美地集成到了Java栈跟踪里面，如图1.3所示：
</code></pre><p><img src="http://7xpgda.com1.z0.glb.clouddn.com/1.2.2.3png" alt="Alt text" title="图片资源/stacktrace.png"></p>
<p>(图1.3 模板执行出错后的Java堆栈跟踪)</p>
<h4 id="1-2-3-简单的无状态MVC架构"><a href="#1-2-3-简单的无状态MVC架构" class="headerlink" title="1.2.3 简单的无状态MVC架构"></a>1.2.3 简单的无状态MVC架构</h4><pre><code>一端是数据库，另一端是Web浏览器，为什么我们需要在这两者之间保存状态？

有状态并且基于组件的Java Web框架能够更加容易地保存页面状态，但这同样带来了很多其他的问题：如果用户在新的浏览器窗口中重新打开应用会发生什么？用户按了后退按钮又会是什么结果？

无共享架构是很多Web应用框架所提倡的（ROR，Django等）。由于浏览器变得越来越强大，我们并不需要技巧性地构建HTTP模型来创建伪造的状态，只需在客户端使用Ajax或者离线存储技术就可以很容易地解决状态问题。无共享架构的另一优势是使页面的呈现更加平滑，更容易地实现局部页面更新（或者渐进式的页面处理流程）。
</code></pre><h4 id="1-2-4-HTTP到代码的映射"><a href="#1-2-4-HTTP到代码的映射" class="headerlink" title="1.2.4 HTTP到代码的映射"></a>1.2.4 HTTP到代码的映射</h4><pre><code>如果读者使用过其他的Java Web框架（比如说Struts）可能会发现，这些框架的底层实现其实是对HTTP协议做了进一步封装，所以它们提供的Java API和自身的理念会让人觉得很不自然。Play框架在设计过程中换了一种思维方式，即Web应用框架也应该提供完整、直接的方式去访问HTTP————这也是Play框架和其他Java Web框架最根本的差异。

HTTP，Request/Response模式，Rest架构风格，HTTP内容协商（Content–type negotiation），URI等等，所有这些都是Play框架的主要概念。如果用户需要将URI绑定到指定的Java方法调用，只需要在路由文件中以如下方式进行配置：
</code></pre><p>GET    /clients/{id}        Clients.show<br>      如果Ajax，REST以及管理页面之间的“前进/后退”操作是日常开发中需要频繁考虑的需求，那么Play框架无疑是最佳的选择，因为针对这些问题它都提供了非常优秀的解决方案。</p>
<h4 id="1-2-5-高效的模板引擎"><a href="#1-2-5-高效的模板引擎" class="headerlink" title="1.2.5 高效的模板引擎"></a>1.2.5 高效的模板引擎</h4><pre><code>也许读者已经深深地感受到了JSP和表达式语言背后的理念，但是为什么在创建标签库的时候需要如此多的配置文件？为什么不能直接访问底层的模型对象？JSP中太多的限制确实让开发者感到失望，受JSP启发又不被其约束，Play框架提供了自定义的模板引擎机制。

开发者再也不需要编写这些令人厌倦的代码了：
</code></pre><p>&lt;%@ taglib uri=”<a href="http://java.sun.com/jsp/jstl/core" target="_blank" rel="external">http://java.sun.com/jsp/jstl/core</a>“ prefix=”c” %&gt;<br>&lt;%@ taglib uri=”<a href="http://java.sun.com/jsp/jstl/functions" target="_blank" rel="external">http://java.sun.com/jsp/jstl/functions</a>“ prefix=”fn” %&gt;</p>
<p><c:choose><br>    <c:when test="${emails.unread != null && fn:size(emails.unread)}"><br>        You have ${fn:size(emails.unread)} unread email(s)!<br>    </c:when><br>    <c:otherwise><br>        You have no unread emails!<br>    </c:otherwise><br></c:choose><br>      相信开发者更倾向于用以下方式来书写模板代码：</p>
<p>You have ${emails.unread ?: ‘no’} ${emails.unread?.pluralize(‘email’)} !<br>      Play模板引擎使用的表达式语言为Groovy，它提供了与Java一致的语法。Play主要使用模板机制来渲染HTML，当然也可以生成其他的文档格式，比如e-mail messages，JSON等等。</p>
<h4 id="1-2-6-内置JPA支持"><a href="#1-2-6-内置JPA支持" class="headerlink" title="1.2.6 内置JPA支持"></a>1.2.6 内置JPA支持</h4><pre><code>JPA（Java Persistence API）是Java中最简洁的对象关系映射（object-relational mapping即ORM）API。如果读者以前了解或者使用过JPA，就会发现与其他框架相比，在Play中使用会更加方便。这是因为Play框架对其做了进一步封装，不需要任何配置，Play会自动开启JPA实体管理器（EM），一旦代码被调用就自动进行持久化操作。

此外，实体如果继承Play提供的play.db.jpa.Model类，操作代码将会更加简洁，更加美观：
</code></pre><p>public static void messages(int page) {<br>    User connectedUser = User.find(“byEmail”, connected()).first();<br>    List<message> messages = Message.find(<br>        “user = ? and read = false order by date desc”,<br>        connectedUser<br>    ).from(page * 10).fetch(10);<br>    render(connectedUser, messages);<br>}</message></p>
<h4 id="1-2-7-测试驱动开发（TDD）"><a href="#1-2-7-测试驱动开发（TDD）" class="headerlink" title="1.2.7 测试驱动开发（TDD）"></a>1.2.7 测试驱动开发（TDD）</h4><pre><code>框架集成的测试运行器（Test Runner）让测试驱动开发变的非常简单。Play允许开发者编写各种类型的测试，从基本的单元测试到完善的验收测试，以及直接在浏览器中运行的Selenium测试。值得注意的是，这些测试还可以进行代码覆盖率的统计，具体的测试界面如图1.4所示。
</code></pre><p><img src="http://7xpgda.com1.z0.glb.clouddn.com/1.2.7.png" alt="Alt text" title="图片资源/guide2-2.png"></p>
<p>(图1.4 浏览器中的测试运行器)</p>
<h4 id="1-2-8-Full-Stack应用框架"><a href="#1-2-8-Full-Stack应用框架" class="headerlink" title="1.2.8 Full Stack应用框架"></a>1.2.8 Full Stack应用框架</h4><pre><code>Play框架的最初设计受到实际Java Web开发的启发，包含了所有创建主流Web应用所需要的工具：
</code></pre><p>通过JDBC提供关系数据库支持。<br>使用Hibernate进行对象关系映射（JPA）。<br>使用分布式Memcached集成缓存支持。<br>以JSON或者XML的形式提供web service支持。<br>基于OpenID的分布式用户信息验证。<br>Web应用可以部署在任何应用服务器上（Tomcat，Jboss，GAE，Cloud等）。<br>图像处理API（验证码）。<br>      此外Play还提供了很多实用的模块。开发者可以结合这些模块构建Web应用，这使得我们可以以更加简单，更加直接的方式重用Java代码、模板以及静态资源（比如JavaScript和CSS文件）。</p>
<h4 id="1-2-9-Play的特性总结"><a href="#1-2-9-Play的特性总结" class="headerlink" title="1.2.9 Play的特性总结"></a>1.2.9 Play的特性总结</h4><p>自动编译和重载：当编辑Java文件并保存后，刷新浏览器就能立即查看结果。使用Play开发不需要手动编译、部署以及重新启动Web服务器等操作。<br>无状态模型：Play是真正的无共享框架，为REST而准备。它可以将同一个应用的多个实例分别部署在多台服务器上，因而扩展性非常强。<br>高效的模板引擎：基于表达式语言Groovy的清晰模板引擎，提供了模板的继承、导入以及标签自定义等功能。<br>快速解决错误：当错误发生时，Play会在浏览器中显示出错代码块并提示问题发生的确切位置。<br>Full Stack:提供创建Web应用所需的全部功能，集成了Hibernate、OpenID、Memcached等第三方类库。<br>纯Java：Play采用Java编写代码，可以方便地使用任何Java类库，并且能够非常好地和Eclipse、Netbeans等IDE集成，只需通过命令生成匹配的项目文件即可。<br>基于非阻塞的IO模型：允许创建基于长轮询和WebSocket的主流Web应用。<br>有趣并且高效：省去了Java应用重启的时间，提高了应用的开发效率。</p>
</div><div class="tags"><a href="/tags/play/">play</a></div><div class="post-nav"><a href="/2016/11/18/框架概述/" class="pre"></a><a href="/2016/11/17/hello-world/" class="next">Hello World</a></div><div data-thread-key="2016/11/17/框架概述/" data-title="play framework框架" data-url="http://lisxweb.github.io/2016/11/17/框架概述/" class="ds-share flat"><div class="ds-share-inline"><ul class="ds-share-icons-16"><li data-toggle="ds-share-icons-more"><a href="javascript:void(0);" class="ds-more">分享到：</a></li><li><a href="javascript:void(0);" data-service="weibo" class="ds-weibo">微博</a></li><li><a href="javascript:void(0);" data-service="qzone" class="ds-qzone">QQ空间</a></li><li><a href="javascript:void(0);" data-service="qqt" class="ds-qqt">腾讯微博</a></li><li><a href="javascript:void(0);" data-service="wechat" class="ds-wechat">微信</a></li></ul><div class="ds-share-icons-more"></div></div></div><div data-thread-key="2016/11/17/框架概述/" data-title="play framework框架" data-url="http://lisxweb.github.io/2016/11/17/框架概述/" data-author-key="1" class="ds-thread"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="widget"><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="请输入关键字..."/></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/play-framework/">play framework</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/play/" style="font-size: 15px;">play</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-fei"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/11/18/框架概述/">框架概述</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/17/框架概述/">play framework框架</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/17/hello-world/">Hello World</a></li></ul></div><div class="widget"><div class="comments-title"><i class="fa fa-commt"> 最近评论</i></div><div data-num-items="5" data-show-avatars="0" data-show-time="1" data-show-admin="0" data-excerpt-length="32" data-show-title="1" class="ds-recent-comments"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div></div><a id="totop" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">网站地图</a> |<a href="/atom.xml">订阅本站</a> |<span>联系博主：<a href="mailto:zhenggchaoo@gmail.com" target="_blank" class="fa fa-email"> </a><a href="http://weibo.com/zhengchaooo" target="_blank" class="fa fa-weibo"></a><a href="https://github.com/chaooo" target="_blank" class="fa fa-github"> </a></span></p><p><span> Copyright &copy;<a href="/." rel="nofollow">lisxweb</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span><span><a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> Theme </a>by<a rel="nofollow" target="_blank" href="https://github.com/chaooo"> Charles.</a></span></p></div></div></div><script>var duoshuoQuery = {short_name:'lisx'};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    document.getElementsByTagName('body')[0].appendChild(ds);
})();
</script><script type="text/javascript" src="/js/search.json.js?v=1.0.0"></script></body></html>